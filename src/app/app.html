<mat-sidenav-container class="app-shell" [hasBackdrop]="hasNavigationOverlay()">
  <mat-sidenav
    #drawer
    class="app-sidenav"
    [mode]="isHandset() ? 'over' : 'side'"
    [opened]="!isHandset()"
  >
    <div class="app-brand">
      <div class="app-logo">FP</div>
      <div class="app-brand__text">
        <span class="app-name">FinPocket</span>
        <span class="app-tagline">{{ appStatus }} • {{ appVersion }}</span>
      </div>
    </div>

    <mat-nav-list>
      <a
        mat-list-item
        *ngFor="let item of navItems"
        [routerLink]="item.route"
        routerLinkActive="active"
        (click)="onNavItemSelect(drawer)"
      >
        <mat-icon matListItemIcon class="nav-icon">{{ item.icon }}</mat-icon>
        <span matListItemTitle class="nav-text__label">{{ item.label }}</span>
        <span matListItemLine class="nav-text__hint">{{ item.description }}</span>
      </a>
    </mat-nav-list>

    <div class="app-meta">
      <span class="tag-chip">Offline-first</span>
      <p>Ваши данные живут в IndexedDB через Dexie.js и синхронизируются только когда вы готовы.</p>
    </div>
  </mat-sidenav>

  <mat-sidenav-content>
    <mat-toolbar class="app-toolbar" color="primary">
      <button
        mat-icon-button
        class="menu-button"
        type="button"
        aria-label="Открыть меню"
        (click)="drawer.toggle()"
        *ngIf="isHandset()"
      >
        <mat-icon>menu</mat-icon>
      </button>

      <div class="toolbar-title">
        <span class="toolbar-name">FinPocket</span>
        <span class="toolbar-subtitle">финансы в одном кармане</span>
      </div>

      <span class="spacer"></span>

      <button
        mat-icon-button
        type="button"
        [attr.aria-label]="'Открыть настройки. Текущая тема: ' + (activeTheme() === 'dark' ? 'тёмная' : 'светлая')"
        routerLink="/settings"
      >
        <mat-icon>tune</mat-icon>
      </button>

      <button
        mat-icon-button
        type="button"
        aria-label="Перейти к синхронизации"
        routerLink="/sync"
      >
        <mat-icon>cloud_sync</mat-icon>
      </button>
    </mat-toolbar>

    <main class="app-content">
      <router-outlet></router-outlet>
    </main>
  </mat-sidenav-content>
</mat-sidenav-container>
