<section class="meters-edit">
  <header>
    <h2>Передача показаний</h2>
    <p>Передайте актуальные данные по ресурсам в пару кликов.</p>
  </header>

  <form (ngSubmit)="submit()" #meterForm="ngForm" class="meters-edit__form">
    <label>
      Объект
      <input type="text" name="object" list="meter-objects" [(ngModel)]="form.object" required />
      <datalist id="meter-objects">
        <option *ngFor="let object of objectOptions$ | async; trackBy: trackObject" [value]="object"></option>
      </datalist>
    </label>

    <fieldset>
      <legend>Тип ресурса</legend>
      <mat-button-toggle-group name="type" [value]="form.type" (change)="updateType($event.value)">
        <mat-button-toggle *ngFor="let option of typeOptions" [value]="option.type">
          {{ option.label }}
        </mat-button-toggle>
      </mat-button-toggle-group>
    </fieldset>

    <label>
      Значение ({{ form.unit }})
      <input type="number" name="value" [(ngModel)]="form.value" min="0" required />
    </label>

    <label>
      Дата передачи
      <input type="date" name="submittedAt" [(ngModel)]="form.submittedAt" />
    </label>

    <button mat-raised-button color="primary" type="submit" [disabled]="meterForm.invalid">
      {{ isEditMode ? 'Обновить показания' : 'Отправить показания' }}
    </button>
  </form>
</section>
