<section class="finance-list">
  <header class="finance-list__header">
    <h2>Живой список транзакций</h2>
    <p>Отслеживайте актуальные поступления и траты с быстрой аналитикой по фильтрам.</p>
  </header>

  <mat-card class="finance-list__filters">
    <mat-card-title>Фильтры</mat-card-title>
    <mat-chip-listbox aria-label="Фильтры">
      <mat-chip-option *ngFor="let filter of filters" selected>{{ filter }}</mat-chip-option>
    </mat-chip-listbox>
  </mat-card>

  <section class="finance-list__summary" aria-label="Баланс">
    <mat-card>
      <mat-card-title>Баланс</mat-card-title>
      <p>{{ currencyService.format(balance(), defaultCurrencyCode()) }}</p>
    </mat-card>
    <mat-card>
      <mat-card-title>Доходы</mat-card-title>
      <p>{{ currencyService.format(income(), defaultCurrencyCode()) }}</p>
    </mat-card>
    <mat-card>
      <mat-card-title>Расходы</mat-card-title>
      <p>{{ currencyService.format(expenses(), defaultCurrencyCode()) }}</p>
    </mat-card>
  </section>

  <mat-card>
    <mat-card-title>Последние операции</mat-card-title>
    <mat-list *ngIf="transactions().length; else emptyTransactions">
      <mat-list-item *ngFor="let transaction of transactions()">
        <div matListItemTitle>{{ transaction.description }}</div>
        <div matListItemLine>
          {{ transaction.category }} • {{ transaction.account }} •
          {{ transaction.occurredAt | date:'d MMMM' }}
        </div>
        <div
          matListItemMeta
          [class.finance-list__amount-positive]="transaction.amount > 0"
          [class.finance-list__amount-negative]="transaction.amount < 0"
        >
          {{ currencyService.format(transaction.convertedAmount, defaultCurrencyCode()) }}
          <span *ngIf="transaction.currency !== defaultCurrencyCode()">
            ({{ transaction.amount | number:'1.2-2' }} {{ transaction.currency }})
          </span>
        </div>
      </mat-list-item>
    </mat-list>
    <ng-template #emptyTransactions>
      <div class="finance-list__empty">Добавьте первую операцию, чтобы увидеть статистику</div>
    </ng-template>
  </mat-card>
</section>
