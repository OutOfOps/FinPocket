<div class="debts-view">
  <!-- Header with Summary -->
  <header class="debts-header">
    <h1>Долги</h1>
    <div class="debts-summary-neo">
      <div class="summary-card lent">
        <div class="card-icon"><mat-icon>trending_up</mat-icon></div>
        <div class="card-content">
          <span class="label">Мне должны</span>
          <span class="amount">{{ currencyService.format(totals().lent, totals().defaultCurrency, 0) }}</span>
        </div>
      </div>
      <div class="summary-card owed">
        <div class="card-icon"><mat-icon>trending_down</mat-icon></div>
        <div class="card-content">
          <span class="label">Я должен</span>
          <span class="amount">{{ currencyService.format(totals().owed, totals().defaultCurrency, 0) }}</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Contact List -->
  <div class="debts-list-container">
    <div class="list-actions">
      <h3 class="list-title">Мои долги</h3>
      <button class="add-debt-fab" [routerLink]="['/debts', 'create']" mat-ripple>
        <mat-icon>add</mat-icon>
      </button>
    </div>

    @if (debts().length) {
    @for (debt of debts(); track debt.id) {
    <div class="debt-neo-card" [routerLink]="['/debts', debt.id]" mat-ripple>

      <div class="debt-card-left">
        <div class="contact-avatar" [style.background-color]="getAvatarColor(debt.name)">
          {{ getInitials(debt.name) }}
        </div>
        <div class="debt-main-info">
          <span class="contact-name">{{ debt.name }}</span>
          <span class="debt-kind">{{ debt.kindLabel }}</span>
        </div>
      </div>

      <div class="debt-card-right">
        <span class="debt-amount" [class.positive]="debt.kind === 'deposit' || debt.kind === 'lend'"
          [class.negative]="debt.kind === 'credit' || debt.kind === 'loan'">
          {{ currencyService.format(debt.amount, debt.currency, 0) }}
        </span>
        <div class="debt-status-row">
          <span class="status-dot" [class]="debt.status"></span>
          @if (debt.dueDate) {
          <span class="debt-date" [class.overdue]="debt.status === 'overdue'">
            {{ debt.dueDate | date:'d MMM' }}
          </span>
          }
        </div>
      </div>
    </div>
    }
    } @else {
    <div class="empty-state neo-card">
      <mat-icon>people_outline</mat-icon>
      <p>Список пуст</p>
      <span class="hint">Добавьте, кому вы заняли или кто занял вам</span>
    </div>
    }
  </div>
</div>