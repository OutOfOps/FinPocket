<div class="debts-view">
  <!-- Header with Summary -->
  <header class="debts-header">
    <div class="debts-summary-card">
      <div class="summary-item owed">
        <span class="label">Мне должны</span>
        <span class="amount">{{ currencyService.format(totals().lent, totals().defaultCurrency, 0) }}</span>
      </div>
      <div class="divider"></div>
      <div class="summary-item debt">
        <span class="label">Я должен</span>
        <span class="amount">{{ currencyService.format(totals().owed, totals().defaultCurrency, 0) }}</span>
      </div>
    </div>
  </header>

  <!-- Contact List -->
  <div class="debts-list-container">
    <h3 class="list-title">Контакты</h3>

    <ng-container *ngIf="debts().length; else emptyState">
      <div class="debt-contact-item" *ngFor="let debt of debts(); trackBy: trackDebt" [routerLink]="['/debts', debt.id]"
        mat-ripple>

        <!-- Avatar -->
        <div class="contact-avatar" [style.background-color]="getAvatarColor(debt.name)">
          {{ getInitials(debt.name) }}
        </div>

        <!-- Info -->
        <div class="contact-info">
          <div class="contact-name-row">
            <span class="contact-name">{{ debt.name }}</span>
            <span class="contact-amount" [class.positive]="debt.kind === 'deposit' || debt.kind === 'lend'"
              [class.negative]="debt.kind === 'credit' || debt.kind === 'loan'">
              {{ currencyService.format(debt.convertedAmount, defaultCurrencyCode(), 0) }}
            </span>
          </div>
          <div class="contact-meta-row">
            <span class="contact-kind">{{ debt.kindLabel }}</span>
            <span class="dot" *ngIf="debt.dueDate">·</span>
            <span class="contact-date" *ngIf="debt.dueDate" [class.overdue]="debt.status === 'overdue'">
              {{ debt.dueDate | date:'d MMM' }}
            </span>
          </div>
        </div>
      </div>
    </ng-container>

    <ng-template #emptyState>
      <div class="empty-state">
        <mat-icon>people_outline</mat-icon>
        <p>Список пуст</p>
        <span class="hint">Добавьте, кому вы заняли или кто занял вам</span>
      </div>
    </ng-template>
  </div>
</div>