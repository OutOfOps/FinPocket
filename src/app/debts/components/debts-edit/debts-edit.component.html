<div class="debts-edit-view">
  <div class="edit-header">
    <button mat-icon-button (click)="cancel()" class="back-btn">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <h1>{{ debtId() ? 'Редактировать долг' : 'Новый долг' }}</h1>
  </div>

  <div class="edit-content">
    <!-- Amount Display (Now an Input) -->
    <div class="amount-section">
      <div class="amount-input-wrapper" [class.negative]="direction() === 'borrowed'"
        [class.positive]="direction() === 'lent'">
        <span class="currency-symbol">{{ defaultCurrencyCode() }}</span>
        <input type="number" [ngModel]="amount()" (ngModelChange)="amount.set($event)" class="amount-input"
          placeholder="0" step="0.01" matInput>
      </div>
    </div>

    <!-- Type Switcher -->
    <div class="type-switcher neo-card">
      <button class="type-btn" [class.active]="direction() === 'borrowed'" (click)="setType('borrowed')" mat-ripple>
        <mat-icon>trending_down</mat-icon>
        <span>Я должен</span>
      </button>
      <button class="type-btn" [class.active]="direction() === 'lent'" (click)="setType('lent')" mat-ripple>
        <mat-icon>trending_up</mat-icon>
        <span>Мне должны</span>
      </button>
    </div>

    <!-- Contact Name Input -->
    <div class="form-group neo-card">
      <div class="input-with-icon">
        <mat-icon>person</mat-icon>
        <input type="text" placeholder="Имя контакта" [ngModel]="contactName()"
          (ngModelChange)="contactName.set($event)" class="neo-input">
      </div>
    </div>

    <!-- Date & Note -->
    <div class="form-row">
      <div class="form-group neo-card flex-1">
        <label class="input-label">Дата возврата</label>
        <div class="input-with-icon">
          <mat-icon>calendar_today</mat-icon>
          <input type="date" [ngModel]="dueDate()" (ngModelChange)="dueDate.set($event)" class="neo-input no-border">
        </div>
      </div>
    </div>

    <div class="form-group neo-card">
      <label class="input-label">Заметка</label>
      <div class="input-with-icon">
        <mat-icon>edit_note</mat-icon>
        <textarea placeholder="О чем этот долг..." [ngModel]="note()" (ngModelChange)="note.set($event)"
          class="neo-input textarea"></textarea>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="actions-section">
      <button class="neo-submit-btn" [disabled]="!canSubmit" (click)="submit()" mat-ripple>
        <mat-icon>check</mat-icon>
        <span>{{ debtId() ? 'Сохранить изменения' : 'Создать долг' }}</span>
      </button>
    </div>
  </div>
</div>