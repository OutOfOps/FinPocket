import{G as o,J as h,Va as l,w as n,wb as c,z as r}from"./chunk-X6DWFC4Y.js";var m=class s{constructor(e,t){this.document=e;this.overlayContainer=t;this.applyThemeClass(this.themeSignal()),l(()=>{let i=this.themeSignal();if(this.applyThemeClass(i),this.skipPersistence){this.skipPersistence=!1;return}this.persistTheme(i)})}storageKey="finpocket-theme";themeClasses={dark:"finpocket-dark-theme",light:"finpocket-light-theme"};themeSignal=h(this.resolveInitialTheme());skipPersistence=!1;theme=this.themeSignal.asReadonly();setTheme(e){this.themeSignal()!==e&&this.themeSignal.set(e)}toggleTheme(){this.themeSignal.update(e=>e==="dark"?"light":"dark")}resetToDefault(){this.skipPersistence=!0,this.themeSignal.set("dark");let e=this.safeWindow();if(e)try{e.localStorage.removeItem(this.storageKey)}catch{}}resolveInitialTheme(){let e=this.safeWindow();if(e){try{let t=e.localStorage.getItem(this.storageKey);if(t==="dark"||t==="light")return t}catch{}if(e.matchMedia&&e.matchMedia("(prefers-color-scheme: dark)").matches)return"dark";if(e.matchMedia&&e.matchMedia("(prefers-color-scheme: light)").matches)return"light"}return"dark"}applyThemeClass(e){let t=this.document.body.classList,i=this.overlayContainer?.getContainerElement().classList??null;if(Object.values(this.themeClasses).forEach(a=>{t.remove(a),i?.remove(a)}),Object.hasOwn(this.themeClasses,e)){let a=this.themeClasses[e];t.add(a),i?.add(a)}}persistTheme(e){let t=this.safeWindow();if(t)try{t.localStorage.setItem(this.storageKey,e)}catch{}}safeWindow(){return typeof window>"u"?null:window}static \u0275fac=function(t){return new(t||s)(r(o),r(c,8))};static \u0275prov=n({token:s,factory:s.\u0275fac,providedIn:"root"})};export{m as a};
