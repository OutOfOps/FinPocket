import{a as w}from"./chunk-A4H2FJOJ.js";import"./chunk-MBWK4RVX.js";import{a as Ie}from"./chunk-D2TD4YRZ.js";import{a as A}from"./chunk-XXUWZJOY.js";import"./chunk-KX7B4REP.js";import"./chunk-6HSA32IX.js";import{$b as G,A as y,Ab as se,Ba as k,Bb as pe,C as p,Cb as fe,D as f,Da as u,Db as _e,Ea as C,Eb as ge,Fa as E,Fb as Ce,Ga as V,Gb as Ee,Ha as ue,Hb as ye,Ia as h,Ib as Me,J as ee,Ja as v,Jb as he,Ka as x,Kb as ve,Na as K,Ob as q,Qa as Q,R as r,Sa as U,Ta as L,Tb as xe,Ua as _,Ub as Fe,Va as X,Vb as Se,Xb as be,Y as F,Yb as Ae,Z as T,Za as W,_a as R,_b as z,aa as g,bb as ae,cb as oe,ec as we,f as $,fc as De,ja as m,ka as e,la as n,lb as re,lc as Oe,ma as te,mc as Be,na as ne,nb as ce,oa as ie,ob as le,pb as Y,qa as B,ra as M,sa as d,sb as me,tb as j,vc as S,x as N,za as I,zb as de}from"./chunk-X6DWFC4Y.js";var H=class a{static \u0275fac=function(t){return new(t||a)};static \u0275cmp=F({type:a,selectors:[["app-finance"]],standalone:!1,decls:25,vars:0,consts:[[1,"feature-shell"],[1,"feature-shell__header"],[1,"tag-chip"],[1,"feature-shell__title"],[1,"feature-shell__subtitle"],[1,"feature-shell__actions"],["mat-raised-button","","color","primary","routerLink","create","routerLinkActive","is-active","aria-label","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u043E\u0432\u0443\u044E \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u044E"],["mat-stroked-button","","color","accent","routerLink","list","routerLinkActive","is-active","aria-label","\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u043A \u0441\u043F\u0438\u0441\u043A\u0443"],["aria-label","\u041D\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u044F \u043F\u043E \u0440\u0430\u0437\u0434\u0435\u043B\u0443",1,"feature-shell__nav"],["mat-button","","routerLink","list","routerLinkActive","feature-shell__nav-link--active"],["mat-button","","routerLink","create","routerLinkActive","feature-shell__nav-link--active"],["mat-button","","routerLink","scenario-monthly-budget","routerLinkActive","feature-shell__nav-link--active"]],template:function(t,i){t&1&&(e(0,"section",0)(1,"header",1)(2,"span",2),u(3,"\u0424\u0438\u043D\u0430\u043D\u0441\u044B"),n(),e(4,"h1",3),u(5,"\u041A\u043E\u043D\u0442\u0440\u043E\u043B\u044C \u0431\u0430\u043B\u0430\u043D\u0441\u0430 \u0438 \u0431\u044E\u0434\u0436\u0435\u0442\u0430"),n(),e(6,"p",4),u(7," \u0412\u0435\u0434\u0438\u0442\u0435 \u0443\u0447\u0451\u0442 \u0440\u0430\u0441\u0445\u043E\u0434\u043E\u0432 \u0438 \u0434\u043E\u0445\u043E\u0434\u043E\u0432 \u043F\u043E \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F\u043C, \u0443\u043F\u0440\u0430\u0432\u043B\u044F\u0439\u0442\u0435 \u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u0438\u043C\u0438 \u0441\u0447\u0435\u0442\u0430\u043C\u0438 \u0438 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0439\u0442\u0435 \u0444\u0430\u043A\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u043E\u0441\u0442\u0430\u0442\u043E\u043A \u0432 \u043B\u044E\u0431\u043E\u0439 \u0432\u0430\u043B\u044E\u0442\u0435. \u0413\u0438\u0431\u043A\u0438\u0435 \u0444\u0438\u043B\u044C\u0442\u0440\u044B \u0438 \u0431\u044B\u0441\u0442\u0440\u044B\u0435 \u0442\u0435\u0433\u0438 \u043F\u043E\u043C\u043E\u0433\u0430\u044E\u0442 \u043D\u0430\u0445\u043E\u0434\u0438\u0442\u044C \u043D\u0443\u0436\u043D\u044B\u0435 \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0438 \u0437\u0430 \u0441\u0435\u043A\u0443\u043D\u0434\u044B. "),n(),e(8,"div",5)(9,"a",6)(10,"mat-icon"),u(11,"add"),n(),u(12," \u041D\u043E\u0432\u0430\u044F \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u044F "),n(),e(13,"a",7)(14,"mat-icon"),u(15,"receipt_long"),n(),u(16," \u0412\u0441\u0435 \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0438 "),n()()(),e(17,"nav",8)(18,"a",9),u(19,"\u0421\u043F\u0438\u0441\u043E\u043A"),n(),e(20,"a",10),u(21,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"),n(),e(22,"a",11),u(23,"\u0414\u0435\u0442\u0430\u043B\u0438 \u0431\u044E\u0434\u0436\u0435\u0442\u0430"),n()(),te(24,"router-outlet"),n())},dependencies:[re,ce,le,j,q],styles:["[_nghost-%COMP%]{display:block}.feature-shell__actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}.feature-shell__actions[_ngcontent-%COMP%]{align-items:center;display:flex;flex-wrap:wrap;gap:.75rem}.feature-shell__nav[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap;margin-bottom:1.5rem}.feature-shell__nav-link--active[_ngcontent-%COMP%]{background-color:#3f51b51f}"]})};function We(a,o){if(a&1&&(e(0,"mat-chip-option",8),u(1),n()),a&2){let t=o.$implicit;r(),C(t)}}function Re(a,o){if(a&1&&(e(0,"span"),u(1),Q(2,"number"),n()),a&2){let t=d().$implicit;r(),V(" (",U(2,2,t.amount,"1.2-2")," ",t.currency,") ")}}function je(a,o){if(a&1&&(e(0,"mat-list-item")(1,"div",10),u(2),n(),e(3,"div",11),u(4),Q(5,"date"),n(),e(6,"div",12),u(7),g(8,Re,3,5,"span",13),n()()),a&2){let t=o.$implicit,i=d(2);r(2),C(t.description),r(2),ue(" ",t.category," \u2022 ",t.account," \u2022 ",U(5,10,t.occurredAt,"d MMMM")," "),r(2),k("finance-list__amount-positive",t.amount>0)("finance-list__amount-negative",t.amount<0),r(),E(" ",i.currencyService.format(t.convertedAmount,i.defaultCurrencyCode())," "),r(),m("ngIf",t.currency!==i.defaultCurrencyCode())}}function qe(a,o){if(a&1&&(e(0,"mat-list"),g(1,je,9,13,"mat-list-item",9),n()),a&2){let t=d();r(),m("ngForOf",t.transactions())}}function ze(a,o){a&1&&(e(0,"div",14),u(1,"\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043F\u0435\u0440\u0432\u0443\u044E \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u044E, \u0447\u0442\u043E\u0431\u044B \u0443\u0432\u0438\u0434\u0435\u0442\u044C \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0443"),n())}var D=class a{transactionsStore=y(w);currencyService=y(A);filters=["\u0412\u0441\u0435 \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0438","\u0414\u043E\u0445\u043E\u0434\u044B","\u0420\u0430\u0441\u0445\u043E\u0434\u044B","\u041F\u043E \u0441\u0447\u0435\u0442\u0430\u043C"];transactions=_(()=>this.transactionsStore.listItems());balance=_(()=>this.transactionsStore.balance());expenses=_(()=>-this.transactionsStore.totalExpenses());income=_(()=>this.transactionsStore.totalIncome());defaultCurrencyCode=this.transactionsStore.defaultCurrencyCode;static \u0275fac=function(t){return new(t||a)};static \u0275cmp=F({type:a,selectors:[["app-finance-list"]],decls:33,vars:6,consts:[["emptyTransactions",""],[1,"finance-list"],[1,"finance-list__header"],[1,"finance-list__filters"],["aria-label","\u0424\u0438\u043B\u044C\u0442\u0440\u044B"],["selected","",4,"ngFor","ngForOf"],["aria-label","\u0411\u0430\u043B\u0430\u043D\u0441",1,"finance-list__summary"],[4,"ngIf","ngIfElse"],["selected",""],[4,"ngFor","ngForOf"],["matListItemTitle",""],["matListItemLine",""],["matListItemMeta",""],[4,"ngIf"],[1,"finance-list__empty"]],template:function(t,i){if(t&1&&(e(0,"section",1)(1,"header",2)(2,"h2"),u(3,"\u0416\u0438\u0432\u043E\u0439 \u0441\u043F\u0438\u0441\u043E\u043A \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0439"),n(),e(4,"p"),u(5,"\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0439\u0442\u0435 \u0430\u043A\u0442\u0443\u0430\u043B\u044C\u043D\u044B\u0435 \u043F\u043E\u0441\u0442\u0443\u043F\u043B\u0435\u043D\u0438\u044F \u0438 \u0442\u0440\u0430\u0442\u044B \u0441 \u0431\u044B\u0441\u0442\u0440\u043E\u0439 \u0430\u043D\u0430\u043B\u0438\u0442\u0438\u043A\u043E\u0439 \u043F\u043E \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u043C."),n()(),e(6,"mat-card",3)(7,"mat-card-title"),u(8,"\u0424\u0438\u043B\u044C\u0442\u0440\u044B"),n(),e(9,"mat-chip-listbox",4),g(10,We,2,1,"mat-chip-option",5),n()(),e(11,"section",6)(12,"mat-card")(13,"mat-card-title"),u(14,"\u0411\u0430\u043B\u0430\u043D\u0441"),n(),e(15,"p"),u(16),n()(),e(17,"mat-card")(18,"mat-card-title"),u(19,"\u0414\u043E\u0445\u043E\u0434\u044B"),n(),e(20,"p"),u(21),n()(),e(22,"mat-card")(23,"mat-card-title"),u(24,"\u0420\u0430\u0441\u0445\u043E\u0434\u044B"),n(),e(25,"p"),u(26),n()()(),e(27,"mat-card")(28,"mat-card-title"),u(29,"\u041F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435 \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0438"),n(),g(30,qe,2,1,"mat-list",7)(31,ze,2,0,"ng-template",null,0,L),n()()),t&2){let c=I(32);r(10),m("ngForOf",i.filters),r(6),C(i.currencyService.format(i.balance(),i.defaultCurrencyCode())),r(5),C(i.currencyService.format(i.income(),i.defaultCurrencyCode())),r(5),C(i.currencyService.format(i.expenses(),i.defaultCurrencyCode())),r(4),m("ngIf",i.transactions().length)("ngIfElse",c)}},dependencies:[S,W,R,be,Ae,Fe,xe,Se,z,G,Be,Oe,oe,ae],styles:[".finance-list[_ngcontent-%COMP%]{display:grid;gap:1.5rem}.finance-list__header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.finance-list__summary[_ngcontent-%COMP%]{display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}.finance-list__filters[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.finance-list__amount-positive[_ngcontent-%COMP%]{color:#008f5a;font-weight:600}.finance-list__amount-negative[_ngcontent-%COMP%]{color:#c62828;font-weight:600}.finance-list__empty[_ngcontent-%COMP%]{padding:1.5rem;text-align:center;color:#0000008a}"]})};var Pe=()=>({standalone:!0});function Ge(a,o){if(a&1&&(e(0,"option",20),u(1),n()),a&2){let t=o.$implicit;m("value",t.code),r(),V(" ",t.code," \u2014 ",t.name," ")}}function He(a,o){if(a&1&&(e(0,"option",20),u(1),n()),a&2){let t=o.$implicit;m("value",t),r(),C(t)}}function Je(a,o){if(a&1&&(e(0,"option",20),u(1),n()),a&2){let t=o.$implicit;m("value",t.name),r(),E(" ",t.name," ")}}function Ke(a,o){if(a&1){let t=B();ne(0),e(1,"input",30),x("ngModelChange",function(c){p(t);let s=d(3);return v(s.editingAccountName,c)||(s.editingAccountName=c),f(c)}),n(),e(2,"div",31)(3,"button",32),M("click",function(){p(t);let c=d(3);return f(c.cancelAccountEdit())}),u(4,"\u041E\u0442\u043C\u0435\u043D\u0430"),n(),e(5,"button",27),M("click",function(){p(t);let c=d(3);return f(c.saveAccountEdit())}),u(6," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C "),n()(),ie()}if(a&2){let t=d(3);r(),h("ngModel",t.editingAccountName),m("ngModelOptions",K(3,Pe)),r(4),m("disabled",!t.canSaveAccountEdit())}}function Qe(a,o){if(a&1){let t=B();e(0,"span",33),u(1),n(),e(2,"div",31)(3,"button",34),M("click",function(){p(t);let c=d().$implicit,s=d(2);return f(s.startAccountEdit(c))}),e(4,"mat-icon"),u(5,"edit"),n()(),e(6,"button",35),M("click",function(){p(t);let c=d().$implicit,s=d(2);return f(s.removeAccount(c))}),e(7,"mat-icon"),u(8,"delete"),n()()()}if(a&2){let t=d().$implicit,i=d(2);r(),C(t.name),r(5),m("disabled",i.accounts().length<=1)}}function Ue(a,o){if(a&1&&(e(0,"li",28),g(1,Ke,7,4,"ng-container",29)(2,Qe,9,2,"ng-template",null,1,L),n()),a&2){let t=o.$implicit,i=I(3),c=d(2);r(),m("ngIf",c.editingAccountId===t.id)("ngIfElse",i)}}function Xe(a,o){if(a&1){let t=B();e(0,"section",21)(1,"header",22)(2,"h3"),u(3,"\u0421\u0447\u0435\u0442\u0430 \u0434\u043B\u044F \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0439"),n(),e(4,"p"),u(5,"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0441\u043F\u0438\u0441\u043E\u043A \u0441\u0447\u0435\u0442\u043E\u0432, \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0445 \u0432 \u0444\u043E\u0440\u043C\u0430\u0445 \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0439."),n()(),e(6,"ul",23),g(7,Ue,4,2,"li",24),n(),e(8,"div",25)(9,"input",26),x("ngModelChange",function(c){p(t);let s=d();return v(s.newAccountName,c)||(s.newAccountName=c),f(c)}),n(),e(10,"button",27),M("click",function(){p(t);let c=d();return f(c.addAccount())}),u(11," \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0441\u0447\u0451\u0442 "),n()()()}if(a&2){let t=d();r(7),m("ngForOf",t.accounts())("ngForTrackBy",t.trackAccount),r(2),h("ngModel",t.newAccountName),m("ngModelOptions",K(5,Pe)),r(),m("disabled",!t.canAddAccount())}}var b=class a{transactionsStore=y(w);currencyService=y(A);accountsService=y(Ie);formModel={type:"expense",amount:0,currency:this.currencyService.getDefaultCurrencyCode(),category:"",account:"",date:new Date().toISOString().substring(0,10),note:""};categories=["\u041F\u0440\u043E\u0434\u0443\u043A\u0442\u044B","\u0422\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442","\u0414\u043E\u043C","\u0417\u0434\u043E\u0440\u043E\u0432\u044C\u0435","\u041E\u0431\u0440\u0430\u0437\u043E\u0432\u0430\u043D\u0438\u0435"];currencies=this.currencyService.currencies;accounts=this.accountsService.accounts;accountNames=_(()=>this.accounts().map(o=>o.name));defaultCurrency=_(()=>this.currencyService.defaultCurrencyDetails());accountsEditorOpen=ee(!1);newAccountName="";editingAccountId=null;editingAccountName="";constructor(){X(()=>{let o=this.currencyService.getDefaultCurrencyCode();this.formModel.currency!==o&&(this.formModel.currency=o)}),X(()=>{let o=this.accounts();o.length&&(o.some(t=>t.name===this.formModel.account)||(this.formModel.account=o[0].name))})}updateType(o){this.formModel.type=o}toggleAccountsEditor(){this.accountsEditorOpen.update(o=>!o)}addAccount(){this.accountsService.addAccount(this.newAccountName),this.newAccountName=""}startAccountEdit(o){this.editingAccountId=o.id,this.editingAccountName=o.name}cancelAccountEdit(){this.editingAccountId=null,this.editingAccountName=""}saveAccountEdit(){!this.editingAccountId||!this.editingAccountName.trim()||(this.accountsService.updateAccount(this.editingAccountId,this.editingAccountName),this.cancelAccountEdit())}removeAccount(o){if(this.accountsService.removeAccount(o.id),this.formModel.account===o.name){let t=this.accountNames();t.length?this.formModel.account=t[0]:this.formModel.account=""}}canAddAccount(){return!!this.newAccountName.trim()}canSaveAccountEdit(){return!!this.editingAccountName.trim()}trackAccount(o,t){return t.id}submit(){return $(this,null,function*(){if(this.formModel.amount<=0||!this.formModel.category)return;let o={type:this.formModel.type,amount:Math.abs(this.formModel.amount),currency:this.formModel.currency,category:this.formModel.category,account:this.formModel.account,occurredAt:new Date(this.formModel.date).toISOString(),note:this.formModel.note.trim()||void 0};yield this.transactionsStore.addTransaction(o),this.formModel.amount=0,this.formModel.note="",this.formModel.category=""})}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=F({type:a,selectors:[["app-finance-edit"]],decls:48,vars:14,consts:[["transactionForm","ngForm"],["accountView",""],[1,"finance-edit"],[1,"finance-edit__form",3,"ngSubmit"],["name","type","aria-label","\u0422\u0438\u043F \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0438",3,"change","value"],["value","income"],["value","expense"],["value","transfer"],["type","number","name","amount","required","","min","0.01","step","0.01",3,"ngModelChange","ngModel"],["name","currency",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","category","required","",3,"ngModelChange","ngModel"],["value","","disabled",""],["name","account",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["mat-stroked-button","","type","button","color","primary",1,"finance-edit__accounts-toggle",3,"click"],["class","finance-edit__accounts-editor","aria-label","\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0447\u0435\u0442\u0430\u043C\u0438",4,"ngIf"],["type","date","name","date","required","",3,"ngModelChange","ngModel"],["name","note","rows","4",3,"ngModelChange","ngModel"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"value"],["aria-label","\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0447\u0435\u0442\u0430\u043C\u0438",1,"finance-edit__accounts-editor"],[1,"finance-edit__accounts-header"],["role","list",1,"finance-edit__accounts-list"],["class","finance-edit__accounts-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"finance-edit__accounts-add"],["type","text","placeholder","\u041D\u043E\u0432\u044B\u0439 \u0441\u0447\u0451\u0442","aria-label","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043D\u043E\u0432\u043E\u0433\u043E \u0441\u0447\u0451\u0442\u0430",3,"ngModelChange","ngModel","ngModelOptions"],["mat-flat-button","","color","primary","type","button",3,"click","disabled"],[1,"finance-edit__accounts-item"],[4,"ngIf","ngIfElse"],["type","text","aria-label","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0441\u0447\u0451\u0442\u0430",3,"ngModelChange","ngModel","ngModelOptions"],[1,"finance-edit__accounts-actions"],["mat-stroked-button","","type","button",3,"click"],[1,"finance-edit__account-name"],["mat-icon-button","","type","button","aria-label","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0447\u0451\u0442",3,"click"],["mat-icon-button","","type","button","aria-label","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0441\u0447\u0451\u0442",3,"click","disabled"]],template:function(t,i){if(t&1){let c=B();e(0,"section",2)(1,"header")(2,"h2"),u(3,"\u041D\u043E\u0432\u0430\u044F \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u044F"),n(),e(4,"p"),u(5,"\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043A\u043B\u044E\u0447\u0435\u0432\u044B\u0435 \u043F\u043E\u043B\u044F \u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u0435 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u044E \u0432 \u0436\u0443\u0440\u043D\u0430\u043B FinPocket."),n()(),e(6,"form",3,0),M("ngSubmit",function(){return p(c),f(i.submit())}),e(8,"fieldset")(9,"legend"),u(10,"\u0422\u0438\u043F \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0438"),n(),e(11,"mat-button-toggle-group",4),M("change",function(l){return p(c),f(i.updateType(l.value))}),e(12,"mat-button-toggle",5),u(13,"\u0414\u043E\u0445\u043E\u0434"),n(),e(14,"mat-button-toggle",6),u(15,"\u0420\u0430\u0441\u0445\u043E\u0434"),n(),e(16,"mat-button-toggle",7),u(17,"\u041F\u0435\u0440\u0435\u0432\u043E\u0434"),n()()(),e(18,"label"),u(19," \u0421\u0443\u043C\u043C\u0430 "),e(20,"input",8),x("ngModelChange",function(l){return p(c),v(i.formModel.amount,l)||(i.formModel.amount=l),f(l)}),n()(),e(21,"label"),u(22," \u0412\u0430\u043B\u044E\u0442\u0430 "),e(23,"select",9),x("ngModelChange",function(l){return p(c),v(i.formModel.currency,l)||(i.formModel.currency=l),f(l)}),g(24,Ge,2,3,"option",10),n()(),e(25,"label"),u(26," \u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F "),e(27,"select",11),x("ngModelChange",function(l){return p(c),v(i.formModel.category,l)||(i.formModel.category=l),f(l)}),e(28,"option",12),u(29,"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E"),n(),g(30,He,2,2,"option",10),n()(),e(31,"label"),u(32," \u0421\u0447\u0451\u0442 "),e(33,"select",13),x("ngModelChange",function(l){return p(c),v(i.formModel.account,l)||(i.formModel.account=l),f(l)}),g(34,Je,2,2,"option",14),n()(),e(35,"button",15),M("click",function(){return p(c),f(i.toggleAccountsEditor())}),e(36,"mat-icon"),u(37),n(),u(38," \u0423\u043F\u0440\u0430\u0432\u043B\u044F\u0442\u044C \u0441\u0447\u0435\u0442\u0430\u043C\u0438 "),n(),g(39,Xe,12,6,"section",16),e(40,"label"),u(41," \u0414\u0430\u0442\u0430 "),e(42,"input",17),x("ngModelChange",function(l){return p(c),v(i.formModel.date,l)||(i.formModel.date=l),f(l)}),n()(),e(43,"label"),u(44," \u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439 "),e(45,"textarea",18),x("ngModelChange",function(l){return p(c),v(i.formModel.note,l)||(i.formModel.note=l),f(l)}),n()(),e(46,"button",19),u(47," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u044E "),n()()()}if(t&2){let c=I(7);r(11),m("value",i.formModel.type),r(9),h("ngModel",i.formModel.amount),r(3),h("ngModel",i.formModel.currency),r(),m("ngForOf",i.currencies()),r(3),h("ngModel",i.formModel.category),r(3),m("ngForOf",i.categories),r(3),h("ngModel",i.formModel.account),r(),m("ngForOf",i.accounts())("ngForTrackBy",i.trackAccount),r(3),C(i.accountsEditorOpen()?"expand_less":"edit"),r(2),m("ngIf",i.accountsEditorOpen()),r(3),h("ngModel",i.formModel.date),r(3),h("ngModel",i.formModel.note),r(),m("disabled",c.invalid)}},dependencies:[S,W,R,ge,ye,Me,de,Ce,Ee,se,pe,ve,he,_e,fe,j,me,q,we,De],styles:[".finance-edit[_ngcontent-%COMP%]{display:grid;gap:1.5rem}.finance-edit__form[_ngcontent-%COMP%]{display:grid;gap:1rem;max-width:480px}.finance-edit__form[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{border:none;padding:0;display:flex;flex-direction:column;gap:.75rem}.finance-edit__form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.finance-edit__form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .finance-edit__form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .finance-edit__form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.75rem;border:1px solid rgba(0,0,0,.12);border-radius:.5rem;font:inherit}.finance-edit__form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.finance-edit__accounts-toggle[_ngcontent-%COMP%]{justify-self:start;display:inline-flex;align-items:center;gap:.5rem}.finance-edit__accounts-editor[_ngcontent-%COMP%]{display:grid;gap:1rem;padding:1rem;border:1px solid rgba(0,0,0,.12);border-radius:.75rem;background:#00000005}.finance-edit__accounts-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem}.finance-edit__accounts-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0 0;color:#0009;font-size:.875rem}.finance-edit__accounts-list[_ngcontent-%COMP%]{display:grid;gap:.75rem;list-style:none;margin:0;padding:0}.finance-edit__accounts-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.finance-edit__accounts-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:.5rem .75rem;border:1px solid rgba(0,0,0,.2);border-radius:.5rem;font:inherit}.finance-edit__account-name[_ngcontent-%COMP%]{flex:1;font-weight:500}.finance-edit__accounts-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.finance-edit__accounts-add[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:center}.finance-edit__accounts-add[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:.5rem .75rem;border:1px solid rgba(0,0,0,.2);border-radius:.5rem;font:inherit}"]})};var O=class a{currencyService=y(A);transactionsStore=y(w);scenario={id:"scenario-monthly-budget",title:"\u041C\u0430\u0440\u0442 2024",plannedIncome:215e3,plannedExpenses:172500,comment:"\u041E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u043F\u0435\u0440\u0435\u0440\u0430\u0441\u0445\u043E\u0434\u044B \u043F\u0440\u0438\u0448\u043B\u0438\u0441\u044C \u043D\u0430 \u0442\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442 \u0438 \u0441\u0435\u0440\u0432\u0438\u0441\u044B \u043F\u043E\u0434\u043F\u0438\u0441\u043E\u043A."};defaultCurrencyCode=_(()=>this.currencyService.getDefaultCurrencyCode());actualIncome=_(()=>this.transactionsStore.currentMonthTotals().income);actualExpenses=_(()=>this.transactionsStore.currentMonthTotals().expenses);plannedNet=_(()=>this.scenario.plannedIncome-this.scenario.plannedExpenses);actualNet=_(()=>this.actualIncome()-this.actualExpenses());formatCurrency(o,t=0){return this.currencyService.format(o,this.defaultCurrencyCode(),t)}balanceDelta=_(()=>this.actualNet()-this.plannedNet());static \u0275fac=function(t){return new(t||a)};static \u0275cmp=F({type:a,selectors:[["app-finance-details"]],decls:29,vars:9,consts:[[1,"finance-details"],[1,"finance-details__grid"]],template:function(t,i){t&1&&(e(0,"section",0)(1,"header")(2,"h2"),u(3),n(),e(4,"p"),u(5),n()(),e(6,"mat-card")(7,"mat-card-title"),u(8,"\u041F\u043B\u0430\u043D vs \u0444\u0430\u043A\u0442"),n(),e(9,"div",1)(10,"div")(11,"h3"),u(12,"\u041F\u043B\u0430\u043D"),n(),e(13,"p"),u(14),n(),e(15,"p"),u(16),n()(),e(17,"div")(18,"h3"),u(19,"\u0424\u0430\u043A\u0442"),n(),e(20,"p"),u(21),n(),e(22,"p"),u(23),n()(),e(24,"div")(25,"h3"),u(26,"\u041E\u0442\u043A\u043B\u043E\u043D\u0435\u043D\u0438\u0435"),n(),e(27,"p"),u(28),n()()()()()),t&2&&(r(3),E("\u0414\u0435\u0442\u0430\u043B\u0438 \u0441\u0446\u0435\u043D\u0430\u0440\u0438\u044F \u0431\u044E\u0434\u0436\u0435\u0442\u0430: ",i.scenario.title),r(2),C(i.scenario.comment),r(9),E("\u0414\u043E\u0445\u043E\u0434\u044B: ",i.formatCurrency(i.scenario.plannedIncome)),r(2),E("\u0420\u0430\u0441\u0445\u043E\u0434\u044B: ",i.formatCurrency(i.scenario.plannedExpenses)),r(5),E("\u0414\u043E\u0445\u043E\u0434\u044B: ",i.formatCurrency(i.actualIncome())),r(2),E("\u0420\u0430\u0441\u0445\u043E\u0434\u044B: ",i.formatCurrency(i.actualExpenses())),r(4),k("finance-details__positive",i.balanceDelta()>=0),r(),E(" ",i.formatCurrency(i.balanceDelta())," "))},dependencies:[S,z,G],styles:[".finance-details[_ngcontent-%COMP%]{display:grid;gap:1.5rem}.finance-details__grid[_ngcontent-%COMP%]{display:grid;gap:1.5rem;grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}.finance-details__positive[_ngcontent-%COMP%]{color:#008f5a;font-weight:600}"]})};var Ye=[{path:"",component:H,children:[{path:"",pathMatch:"full",redirectTo:"list"},{path:"list",component:D},{path:"create",component:b},{path:":id/edit",component:b},{path:":id",component:O}]}],J=class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=T({type:a});static \u0275inj=N({imports:[Y.forChild(Ye),Y]})};var Ne=class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=T({type:a});static \u0275inj=N({imports:[S,J,D,b,O]})};export{Ne as FinanceModule};
