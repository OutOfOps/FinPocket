import{b as a}from"./chunk-6HSA32IX.js";import{w as i}from"./chunk-X6DWFC4Y.js";var s=class e extends a{transactions;accounts;debts;debtTransactions;meters;categories;backups;syncQueue;encryptionKeys;constructor(){super("FinPocketDB"),this.version(1).stores({transactions:"++id, occurredAt, type, account, category, currency",accounts:"++id, name, type, currency, archived",debts:"++id, contact, direction, status, dueDate",debtTransactions:"++id, debtId, createdAt",meters:"++id, meterType, place, recordedAt",categories:"++id, name, type, archived",backups:"++id, createdAt, checksum",syncQueue:"++id, entityType, action, createdAt, syncedAt, nextRetryAt"}),this.version(2).stores({debts:"++id, contact, kind, direction, status, dueDate, createdAt"}).upgrade(r=>r.table("debts").toCollection().modify(n=>{let t=n;switch(t.kind||(t.kind="loan"),t.participants||(t.participants=[]),t.createdAt||(t.createdAt=new Date().toISOString()),t.status){case"open":t.status="active";break;case"closed":t.status="paid";break}})),this.version(3).stores({encryptionKeys:"++id, keyName, createdAt"}),this.version(4).stores({syncQueue:"++id, entityType, action, createdAt, syncedAt, nextRetryAt"}),this.transactions=this.table("transactions"),this.accounts=this.table("accounts"),this.debts=this.table("debts"),this.debtTransactions=this.table("debtTransactions"),this.meters=this.table("meters"),this.categories=this.table("categories"),this.backups=this.table("backups"),this.syncQueue=this.table("syncQueue"),this.encryptionKeys=this.table("encryptionKeys")}static \u0275fac=function(n){return new(n||e)};static \u0275prov=i({token:e,factory:e.\u0275fac,providedIn:"root"})};export{s as a};
